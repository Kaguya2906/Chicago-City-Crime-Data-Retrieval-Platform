{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {
        "id": "view-in-github",
        "colab_type": "text"
      },
      "source": [
        "<a href=\"https://colab.research.google.com/github/Kaguya2906/Chicago-City-Crime-Data-Retrieval-Platform/blob/main/01.%20Scripting%20Data%20using%20API\" target=\"_parent\"><img src=\"https://colab.research.google.com/assets/colab-badge.svg\" alt=\"Open In Colab\"/></a>"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "2f378bc5",
      "metadata": {
        "id": "2f378bc5"
      },
      "outputs": [],
      "source": [
        "#!pip install pandas\n",
        "#!pip install sodapy"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "b16b61e0",
      "metadata": {
        "id": "b16b61e0"
      },
      "outputs": [],
      "source": [
        "import pandas as pd\n",
        "from sodapy import Socrata"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "9209e7b2",
      "metadata": {
        "id": "9209e7b2"
      },
      "outputs": [],
      "source": [
        " client = Socrata(\"data.cityofchicago.org\",\n",
        "                 \"nWdSWEEkqaZD7cSu2ISBZ4aA5\",\n",
        "                  username=\"yxzhang21@outlook.com\",\n",
        "                  password=\"Temp-123123123\")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "f64ce086",
      "metadata": {
        "id": "f64ce086"
      },
      "outputs": [],
      "source": [
        "# change the timeout variable to an arbitrarily large number of seconds\n",
        "client.timeout = 500"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "7839ec79",
      "metadata": {
        "id": "7839ec79"
      },
      "outputs": [],
      "source": [
        "results = client.get(\"ijzp-q8t2\", limit=7600)"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "37129150",
      "metadata": {
        "id": "37129150"
      },
      "outputs": [],
      "source": [
        "results_df = pd.DataFrame.from_records(results)"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "c87f2036",
      "metadata": {
        "id": "c87f2036",
        "outputId": "5aace80f-d0a7-4058-f984-5a751b8986d3"
      },
      "outputs": [
        {
          "data": {
            "text/html": [
              "<div>\n",
              "<style scoped>\n",
              "    .dataframe tbody tr th:only-of-type {\n",
              "        vertical-align: middle;\n",
              "    }\n",
              "\n",
              "    .dataframe tbody tr th {\n",
              "        vertical-align: top;\n",
              "    }\n",
              "\n",
              "    .dataframe thead th {\n",
              "        text-align: right;\n",
              "    }\n",
              "</style>\n",
              "<table border=\"1\" class=\"dataframe\">\n",
              "  <thead>\n",
              "    <tr style=\"text-align: right;\">\n",
              "      <th></th>\n",
              "      <th>id</th>\n",
              "      <th>case_number</th>\n",
              "      <th>date</th>\n",
              "      <th>block</th>\n",
              "      <th>iucr</th>\n",
              "      <th>primary_type</th>\n",
              "      <th>description</th>\n",
              "      <th>location_description</th>\n",
              "      <th>arrest</th>\n",
              "      <th>domestic</th>\n",
              "      <th>...</th>\n",
              "      <th>longitude</th>\n",
              "      <th>location</th>\n",
              "      <th>:@computed_region_awaf_s7ux</th>\n",
              "      <th>:@computed_region_6mkv_f3dw</th>\n",
              "      <th>:@computed_region_vrxf_vc4k</th>\n",
              "      <th>:@computed_region_bdys_3d7i</th>\n",
              "      <th>:@computed_region_43wa_7qmu</th>\n",
              "      <th>:@computed_region_rpca_8um6</th>\n",
              "      <th>:@computed_region_d9mm_jgwp</th>\n",
              "      <th>:@computed_region_d3ds_rm58</th>\n",
              "    </tr>\n",
              "  </thead>\n",
              "  <tbody>\n",
              "    <tr>\n",
              "      <th>0</th>\n",
              "      <td>13033071</td>\n",
              "      <td>JG212621</td>\n",
              "      <td>2023-04-05T23:51:00.000</td>\n",
              "      <td>017XX N CENTRAL AVE</td>\n",
              "      <td>031A</td>\n",
              "      <td>ROBBERY</td>\n",
              "      <td>ARMED - HANDGUN</td>\n",
              "      <td>STREET</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.765612069</td>\n",
              "      <td>{'latitude': '41.912241248', 'longitude': '-87...</td>\n",
              "      <td>4</td>\n",
              "      <td>22615</td>\n",
              "      <td>26</td>\n",
              "      <td>596</td>\n",
              "      <td>45</td>\n",
              "      <td>2</td>\n",
              "      <td>6</td>\n",
              "      <td>145</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>1</th>\n",
              "      <td>13033063</td>\n",
              "      <td>JG212622</td>\n",
              "      <td>2023-04-05T23:49:00.000</td>\n",
              "      <td>068XX W WRIGHTWOOD AVE</td>\n",
              "      <td>4387</td>\n",
              "      <td>OTHER OFFENSE</td>\n",
              "      <td>VIOLATE ORDER OF PROTECTION</td>\n",
              "      <td>APARTMENT</td>\n",
              "      <td>False</td>\n",
              "      <td>True</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.796935537</td>\n",
              "      <td>{'latitude': '41.927224425', 'longitude': '-87...</td>\n",
              "      <td>39</td>\n",
              "      <td>4454</td>\n",
              "      <td>18</td>\n",
              "      <td>136</td>\n",
              "      <td>44</td>\n",
              "      <td>3</td>\n",
              "      <td>6</td>\n",
              "      <td>183</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>2</th>\n",
              "      <td>13033096</td>\n",
              "      <td>JG212610</td>\n",
              "      <td>2023-04-05T23:45:00.000</td>\n",
              "      <td>0000X W 111TH ST</td>\n",
              "      <td>041A</td>\n",
              "      <td>BATTERY</td>\n",
              "      <td>AGGRAVATED - HANDGUN</td>\n",
              "      <td>STREET</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.624397882</td>\n",
              "      <td>{'latitude': '41.692569761', 'longitude': '-87...</td>\n",
              "      <td>45</td>\n",
              "      <td>21861</td>\n",
              "      <td>45</td>\n",
              "      <td>524</td>\n",
              "      <td>22</td>\n",
              "      <td>19</td>\n",
              "      <td>10</td>\n",
              "      <td>260</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>3</th>\n",
              "      <td>13033107</td>\n",
              "      <td>JG212631</td>\n",
              "      <td>2023-04-05T23:45:00.000</td>\n",
              "      <td>016XX S KARLOV AVE</td>\n",
              "      <td>0820</td>\n",
              "      <td>THEFT</td>\n",
              "      <td>$500 AND UNDER</td>\n",
              "      <td>STREET</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.727380806</td>\n",
              "      <td>{'latitude': '41.858247657', 'longitude': '-87...</td>\n",
              "      <td>36</td>\n",
              "      <td>21569</td>\n",
              "      <td>30</td>\n",
              "      <td>753</td>\n",
              "      <td>14</td>\n",
              "      <td>57</td>\n",
              "      <td>21</td>\n",
              "      <td>109</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>4</th>\n",
              "      <td>13033067</td>\n",
              "      <td>JG212606</td>\n",
              "      <td>2023-04-05T23:35:00.000</td>\n",
              "      <td>003XX W 111TH PL</td>\n",
              "      <td>0460</td>\n",
              "      <td>BATTERY</td>\n",
              "      <td>SIMPLE</td>\n",
              "      <td>RESIDENCE</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.631698516</td>\n",
              "      <td>{'latitude': '41.691577208', 'longitude': '-87...</td>\n",
              "      <td>45</td>\n",
              "      <td>21861</td>\n",
              "      <td>45</td>\n",
              "      <td>660</td>\n",
              "      <td>22</td>\n",
              "      <td>19</td>\n",
              "      <td>10</td>\n",
              "      <td>267</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>...</th>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "      <td>...</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7595</th>\n",
              "      <td>13021225</td>\n",
              "      <td>JG198796</td>\n",
              "      <td>2023-03-25T08:00:00.000</td>\n",
              "      <td>028XX E 83RD ST</td>\n",
              "      <td>0920</td>\n",
              "      <td>MOTOR VEHICLE THEFT</td>\n",
              "      <td>ATTEMPT - AUTOMOBILE</td>\n",
              "      <td>STREET</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.556251559</td>\n",
              "      <td>{'latitude': '41.744594965', 'longitude': '-87...</td>\n",
              "      <td>47</td>\n",
              "      <td>21202</td>\n",
              "      <td>42</td>\n",
              "      <td>244</td>\n",
              "      <td>37</td>\n",
              "      <td>25</td>\n",
              "      <td>19</td>\n",
              "      <td>238</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7596</th>\n",
              "      <td>13021009</td>\n",
              "      <td>JG198477</td>\n",
              "      <td>2023-03-25T08:00:00.000</td>\n",
              "      <td>072XX N SHERIDAN RD</td>\n",
              "      <td>1305</td>\n",
              "      <td>CRIMINAL DAMAGE</td>\n",
              "      <td>CRIMINAL DEFACEMENT</td>\n",
              "      <td>NURSING / RETIREMENT HOME</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.663604147</td>\n",
              "      <td>{'latitude': '42.013109225', 'longitude': '-87...</td>\n",
              "      <td>3</td>\n",
              "      <td>21853</td>\n",
              "      <td>10</td>\n",
              "      <td>357</td>\n",
              "      <td>5</td>\n",
              "      <td>9</td>\n",
              "      <td>11</td>\n",
              "      <td>37</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7597</th>\n",
              "      <td>13020941</td>\n",
              "      <td>JG198294</td>\n",
              "      <td>2023-03-25T07:41:00.000</td>\n",
              "      <td>075XX N PAULINA ST</td>\n",
              "      <td>0560</td>\n",
              "      <td>ASSAULT</td>\n",
              "      <td>SIMPLE</td>\n",
              "      <td>COMMERCIAL / BUSINESS OFFICE</td>\n",
              "      <td>True</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.673157281</td>\n",
              "      <td>{'latitude': '42.018748975', 'longitude': '-87...</td>\n",
              "      <td>3</td>\n",
              "      <td>21853</td>\n",
              "      <td>10</td>\n",
              "      <td>489</td>\n",
              "      <td>5</td>\n",
              "      <td>9</td>\n",
              "      <td>11</td>\n",
              "      <td>32</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7598</th>\n",
              "      <td>13021540</td>\n",
              "      <td>JG199075</td>\n",
              "      <td>2023-03-25T07:30:00.000</td>\n",
              "      <td>073XX S RIDGELAND AVE</td>\n",
              "      <td>1365</td>\n",
              "      <td>CRIMINAL TRESPASS</td>\n",
              "      <td>TO RESIDENCE</td>\n",
              "      <td>APARTMENT</td>\n",
              "      <td>False</td>\n",
              "      <td>False</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.582308726</td>\n",
              "      <td>{'latitude': '41.761258738', 'longitude': '-87...</td>\n",
              "      <td>9</td>\n",
              "      <td>22538</td>\n",
              "      <td>39</td>\n",
              "      <td>419</td>\n",
              "      <td>35</td>\n",
              "      <td>24</td>\n",
              "      <td>18</td>\n",
              "      <td>217</td>\n",
              "    </tr>\n",
              "    <tr>\n",
              "      <th>7599</th>\n",
              "      <td>13021053</td>\n",
              "      <td>JG198313</td>\n",
              "      <td>2023-03-25T07:27:00.000</td>\n",
              "      <td>105XX S MARYLAND AVE</td>\n",
              "      <td>0460</td>\n",
              "      <td>BATTERY</td>\n",
              "      <td>SIMPLE</td>\n",
              "      <td>APARTMENT</td>\n",
              "      <td>False</td>\n",
              "      <td>True</td>\n",
              "      <td>...</td>\n",
              "      <td>-87.60267327</td>\n",
              "      <td>{'latitude': '41.703056982', 'longitude': '-87...</td>\n",
              "      <td>30</td>\n",
              "      <td>21861</td>\n",
              "      <td>47</td>\n",
              "      <td>254</td>\n",
              "      <td>43</td>\n",
              "      <td>19</td>\n",
              "      <td>10</td>\n",
              "      <td>256</td>\n",
              "    </tr>\n",
              "  </tbody>\n",
              "</table>\n",
              "<p>7600 rows Ã— 30 columns</p>\n",
              "</div>"
            ],
            "text/plain": [
              "            id case_number                     date                   block  \\\n",
              "0     13033071    JG212621  2023-04-05T23:51:00.000     017XX N CENTRAL AVE   \n",
              "1     13033063    JG212622  2023-04-05T23:49:00.000  068XX W WRIGHTWOOD AVE   \n",
              "2     13033096    JG212610  2023-04-05T23:45:00.000        0000X W 111TH ST   \n",
              "3     13033107    JG212631  2023-04-05T23:45:00.000      016XX S KARLOV AVE   \n",
              "4     13033067    JG212606  2023-04-05T23:35:00.000        003XX W 111TH PL   \n",
              "...        ...         ...                      ...                     ...   \n",
              "7595  13021225    JG198796  2023-03-25T08:00:00.000         028XX E 83RD ST   \n",
              "7596  13021009    JG198477  2023-03-25T08:00:00.000     072XX N SHERIDAN RD   \n",
              "7597  13020941    JG198294  2023-03-25T07:41:00.000      075XX N PAULINA ST   \n",
              "7598  13021540    JG199075  2023-03-25T07:30:00.000   073XX S RIDGELAND AVE   \n",
              "7599  13021053    JG198313  2023-03-25T07:27:00.000    105XX S MARYLAND AVE   \n",
              "\n",
              "      iucr         primary_type                  description  \\\n",
              "0     031A              ROBBERY              ARMED - HANDGUN   \n",
              "1     4387        OTHER OFFENSE  VIOLATE ORDER OF PROTECTION   \n",
              "2     041A              BATTERY         AGGRAVATED - HANDGUN   \n",
              "3     0820                THEFT               $500 AND UNDER   \n",
              "4     0460              BATTERY                       SIMPLE   \n",
              "...    ...                  ...                          ...   \n",
              "7595  0920  MOTOR VEHICLE THEFT         ATTEMPT - AUTOMOBILE   \n",
              "7596  1305      CRIMINAL DAMAGE          CRIMINAL DEFACEMENT   \n",
              "7597  0560              ASSAULT                       SIMPLE   \n",
              "7598  1365    CRIMINAL TRESPASS                 TO RESIDENCE   \n",
              "7599  0460              BATTERY                       SIMPLE   \n",
              "\n",
              "              location_description  arrest  domestic  ...      longitude  \\\n",
              "0                           STREET   False     False  ...  -87.765612069   \n",
              "1                        APARTMENT   False      True  ...  -87.796935537   \n",
              "2                           STREET   False     False  ...  -87.624397882   \n",
              "3                           STREET   False     False  ...  -87.727380806   \n",
              "4                        RESIDENCE   False     False  ...  -87.631698516   \n",
              "...                            ...     ...       ...  ...            ...   \n",
              "7595                        STREET   False     False  ...  -87.556251559   \n",
              "7596     NURSING / RETIREMENT HOME   False     False  ...  -87.663604147   \n",
              "7597  COMMERCIAL / BUSINESS OFFICE    True     False  ...  -87.673157281   \n",
              "7598                     APARTMENT   False     False  ...  -87.582308726   \n",
              "7599                     APARTMENT   False      True  ...   -87.60267327   \n",
              "\n",
              "                                               location  \\\n",
              "0     {'latitude': '41.912241248', 'longitude': '-87...   \n",
              "1     {'latitude': '41.927224425', 'longitude': '-87...   \n",
              "2     {'latitude': '41.692569761', 'longitude': '-87...   \n",
              "3     {'latitude': '41.858247657', 'longitude': '-87...   \n",
              "4     {'latitude': '41.691577208', 'longitude': '-87...   \n",
              "...                                                 ...   \n",
              "7595  {'latitude': '41.744594965', 'longitude': '-87...   \n",
              "7596  {'latitude': '42.013109225', 'longitude': '-87...   \n",
              "7597  {'latitude': '42.018748975', 'longitude': '-87...   \n",
              "7598  {'latitude': '41.761258738', 'longitude': '-87...   \n",
              "7599  {'latitude': '41.703056982', 'longitude': '-87...   \n",
              "\n",
              "     :@computed_region_awaf_s7ux :@computed_region_6mkv_f3dw  \\\n",
              "0                              4                       22615   \n",
              "1                             39                        4454   \n",
              "2                             45                       21861   \n",
              "3                             36                       21569   \n",
              "4                             45                       21861   \n",
              "...                          ...                         ...   \n",
              "7595                          47                       21202   \n",
              "7596                           3                       21853   \n",
              "7597                           3                       21853   \n",
              "7598                           9                       22538   \n",
              "7599                          30                       21861   \n",
              "\n",
              "     :@computed_region_vrxf_vc4k :@computed_region_bdys_3d7i  \\\n",
              "0                             26                         596   \n",
              "1                             18                         136   \n",
              "2                             45                         524   \n",
              "3                             30                         753   \n",
              "4                             45                         660   \n",
              "...                          ...                         ...   \n",
              "7595                          42                         244   \n",
              "7596                          10                         357   \n",
              "7597                          10                         489   \n",
              "7598                          39                         419   \n",
              "7599                          47                         254   \n",
              "\n",
              "     :@computed_region_43wa_7qmu :@computed_region_rpca_8um6  \\\n",
              "0                             45                           2   \n",
              "1                             44                           3   \n",
              "2                             22                          19   \n",
              "3                             14                          57   \n",
              "4                             22                          19   \n",
              "...                          ...                         ...   \n",
              "7595                          37                          25   \n",
              "7596                           5                           9   \n",
              "7597                           5                           9   \n",
              "7598                          35                          24   \n",
              "7599                          43                          19   \n",
              "\n",
              "     :@computed_region_d9mm_jgwp :@computed_region_d3ds_rm58  \n",
              "0                              6                         145  \n",
              "1                              6                         183  \n",
              "2                             10                         260  \n",
              "3                             21                         109  \n",
              "4                             10                         267  \n",
              "...                          ...                         ...  \n",
              "7595                          19                         238  \n",
              "7596                          11                          37  \n",
              "7597                          11                          32  \n",
              "7598                          18                         217  \n",
              "7599                          10                         256  \n",
              "\n",
              "[7600 rows x 30 columns]"
            ]
          },
          "execution_count": 6,
          "metadata": {},
          "output_type": "execute_result"
        }
      ],
      "source": [
        "results_df"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "id": "fa83f9d4",
      "metadata": {
        "id": "fa83f9d4"
      },
      "outputs": [],
      "source": [
        "results_df.to_csv(\"Crimes - 2001 to Present.csv\")"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "Python 3 (ipykernel)",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.9.13"
    },
    "colab": {
      "provenance": [],
      "toc_visible": true,
      "include_colab_link": true
    }
  },
  "nbformat": 4,
  "nbformat_minor": 5
}